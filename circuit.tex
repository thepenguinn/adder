\documentclass[a4paper, 10pt]{article}
\usepackage[siunitx]{circuitikz}
\usepackage[margin=1in]{geometry}

\begin{document}

\usetikzlibrary{intersections}

\ctikzsubcircuitdef{gateAND} {A, B, O, V, G} {
	coordinate(#1-A) -- ++(0.5,0) to[R, l=~, name=#1-r1]
	++(2,0) node(#1-nb1)[npn, anchor=B]{}
	(#1-nb1.E) node(#1-nb2)[npn, anchor=C]{} (#1-nb2.B)
	to[R, l=~, name=#1-r2] ++(-2,0) -- ++(-0.5,0) coordinate(#1-B)
	(#1-nb2.E) to[short, *-] ++(0,-1) coordinate(#1-G)
	(#1-nb1.C) to[short, *-] ++(1,0) node(#1-nb3)[npn, anchor=B]{}
	(#1-nb3.C) to[R, l=~, name=#1-r3] ++(0,2)
	(#1-nb1.C) -- (#1-nb1.C|-#1-nb3.C) to[R, l=~, name=#1-r4] ++(0,2)
	coordinate(#1-Vbr) to[short, *-] (#1-Vbr-|#1-nb3)
	(#1-Vbr) -- ++(0,1) coordinate(#1-V)
	(#1-nb3.C) to[short, *-] ++(2,0) -- ++(0.5,0) coordinate(#1-O)
	(#1-nb2.E) -| (#1-nb3.E)
}

\ctikzsubcircuitdef{gateOR} {A, B, O, V, G} {
	coordinate(#1-A) -- ++(0.5,0) to[R, name=#1-r1]
	++(2,0) coordinate (#1-Ares)
	-- ++(1.5,0) node(#1-nb1)[npn, anchor=B] {}
	(#1-nb1.C) to[short, *-] ++(-1.5,0) -- ++(0,-1.5)
	node(#1-nb2)[npn, anchor=C]{} (#1-nb2.B)
	-- (#1-nb2.B-|#1-Ares) to[R, name=#1-r2]
	++(-2,0) -- (#1-nb2.B-|#1-A) coordinate(#1-B)
	(#1-nb2.E) to[short, -*] (#1-nb1.E|-#1-nb2.E) -- (#1-nb1.E)
	(#1-nb1.E|-#1-nb2.E) -- ++(0,-1) coordinate(#1-G)
	(#1-nb1.C) -- ++(1,0) node(#1-nb3)[npn, anchor=B]{}
	(#1-nb3.C) to[short, *-] ++(2,0) -- ++(0.5,0) coordinate(#1-O)
	(#1-nb1.C) to[short, *-] (#1-nb1.C|-#1-nb3.C)
	to[R, name=#1-r3] ++(0,2) coordinate(#1-Vbr)
	(#1-nb3.C) to[R, name=#1-r4] ++(0,2)
	-- (#1-Vbr) to[short, *-] ++(0,1) coordinate(#1-V)
	(#1-nb3.E) -- (#1-nb3.E|-#1-nb2.E) -- (#1-nb1.E|-#1-nb2.E)
}

\ctikzsubcircuitdef{gateXOR} {A, B, O, V, G} {
	coordinate(#1-A) -- ++(2,0) to[short, -*] ++(1.5,0)
	coordinate(#1-Abr) -- ++(1.5,0)
	to[R, l=~, name=#1-r1] ++(2,0)
	coordinate (#1-Ares) -- ++(1.5,0)
	node(#1-nb1)[npn, anchor=B]{}
	(#1-nb1.C) to[short, *-] ++($(#1-Ares)-(#1-nb1.B)$)
	-- ++(0,-1.5)
	node(#1-nb2)[npn, anchor=C]{}
	(#1-nb2.E) to[short, -*] (#1-nb2.E-|#1-nb1.E)
	-- (#1-nb1.E)
	(#1-nb2.B) -- (#1-nb2.B-|#1-Ares)
	to[R, l=~, name=#1-r2] ++(-2,0)
	-- (#1-Abr|-#1-nb2.B) to[short, -*] ++(-1.5,0)
	coordinate(#1-Bbr) -- (#1-A|-#1-nb2.B)
	coordinate(#1-B)
	(#1-Abr) -- (#1-Abr|-#1-Bbr) -- ++(0,-0.5)
	to[R, l=~, name=#1-r3] ++(0,-2)
	-- ++(0,-0.5)
	node(#1-nb3)[npn, anchor=B]{}
	(#1-nb3.E) node(#1-nb4)[npn, anchor=C]{}
	(#1-nb4.B) -- (#1-Bbr|-#1-nb4.B) -- ++(0,1)
	to[R, l=~, name=#1-r4] ++(0,2) -- (#1-Bbr)
	(#1-nb1.C) -- ++(1,0) node(#1-nb5)[npn, anchor=B]{}
	(#1-nb5.C) to[short, *-] ++(2,0) -- ++(0.5,0)
	coordinate(#1-O)
	(#1-nb1.C) -- (#1-nb1.C|-#1-nb5.C)
	-- ++(0,1)
	to[R, l=~, name=#1-r5, -*] ++(0,2)
	coordinate(#1-Vbr)
	-- (#1-nb3.C|-#1-Vbr)
	to[R, l=~, name=#1-r6] ++(0,-2) -- (#1-nb3.C)
	(#1-nb5.C) -- ++(0,0.5)
	coordinate(#1-Obr)
	to[short, -*] (#1-nb3|-#1-Obr)
	(#1-Vbr) -- ++(0,2)
	coordinate(#1-V)
	(#1-nb4.E) to[short, -*] (#1-nb4.E-|#1-nb1.E)
	-- (#1-nb2.E-|#1-nb1.E)
	(#1-nb5.E) -- (#1-nb4.E-|#1-nb5.E)
	-- (#1-nb4.E-|#1-nb1.E)
	-- ++(0,-2)
	coordinate(#1-G)
}

\ctikzsubcircuitactivate{gateOR}
\ctikzsubcircuitactivate{gateAND}
\ctikzsubcircuitactivate{gateXOR}

\tikzset{blockdef-above/.style={%
	{Straight Barb[harpoon, right, length=-0.2cm]}-{Straight Barb[harpoon, left, length=-0.2cm]},
	black,
	}}

\tikzset{blockdef-below/.style={%
	{Straight Barb[harpoon, reversed, right, length=0.2cm]}-{Straight Barb[harpoon, reversed, left, length=0.2cm]},
	black,
	}}

\def\gateTransistor{$BC547$}
\def\baseResistor{\SI{220}{k\ohm}}
\def\outResistor{\SI{47}{k\ohm}}
\def\ledResistor{\SI{18}{k\ohm}}
\def\vccPotential{$V_{CC}=\SI{5}{V}$}

\newcommand\myOR[9] {
	\gateOR{#1}{#2} (#1-r1.n) node[above]{#3}
	(#1-r2.n) node[below]{#4}
	(#1-r3.n) node[left]{#5}
	(#1-r4.n) node[left]{#6}
	(#1-nb1) node[right]{#7}
	(#1-nb2) node[right]{#8}
	(#1-nb3) node[right]{#9}
}

\newcommand\myAND[9] {
	\gateAND{#1}{#2} (#1-r1.n) node[above]{#3}
	(#1-r2.n) node[below]{#4}
	(#1-r3.n) node[left]{#5}
	(#1-r4.n) node[left]{#6}
	(#1-nb1) node[right]{#7}
	(#1-nb2) node[right]{#8}
	(#1-nb3) node[right]{#9}
}

\newcommand\myXOR[7] {
	\gateXOR{#1}{#2}
	(#1-nb1) node[right]{#3}
	(#1-nb2) node[right]{#4}
	(#1-nb3) node[right]{#5}
	(#1-nb4) node[right]{#6}
	(#1-nb5) node[right]{#7}
}

\newcommand\labelXORresistor[7] {
	(#1-r1.n) node[above]{#2}
	(#1-r2.n) node[below]{#3}
	(#1-r3.south) node[left]{#4}
	(#1-r4.n) node[left]{#5}
	(#1-r5.n) node[left]{#6}
	(#1-r6.s) node[left]{#7}
}

\clearpage

\section{Logic Gates}

\subsection{AND Gate}

\begin{figure}[!ht]
	\centering
	\begin{circuitikz}[american]

		\draw (0,0) \myAND{G1}{A}
		{\baseResistor}
		{\baseResistor}
		{\outResistor} % Apparently thats the one going to output
		{\baseResistor}
		{\gateTransistor}
		{\gateTransistor}
		{\gateTransistor}
		;

		\draw (G1-A) node[ocirc] {};
		\draw (G1-A) node[left=4pt] {A};

		\draw (G1-B) node[ocirc] {};
		\draw (G1-B) node[left=4pt] {B};

		\draw (G1-O) node[ocirc] {};
		\draw (G1-O) node[right=4pt] {O};

		\draw (G1-V) node[vcc](VCC){\vccPotential};
		\draw (G1-G) node[ground](GND){};

	\end{circuitikz}
	\caption{\textbf{AND} Gate}
\end{figure}

\subsection{OR Gate}

\begin{figure}[!hb]
	\centering
	\begin{circuitikz}[american]

		\draw (0,0) \myOR{G1}{A}
		{\baseResistor}
		{\baseResistor}
		{\baseResistor}
		{\outResistor}
		{\gateTransistor}
		{\gateTransistor}
		{\gateTransistor}
		;

		\draw (G1-A) node[ocirc] {};
		\draw (G1-A) node[left=4pt] {A};

		\draw (G1-B) node[ocirc] {};
		\draw (G1-B) node[left=4pt] {B};

		\draw (G1-O) node[ocirc] {};
		\draw (G1-O) node[right=4pt] {O};

		\draw (G1-V) node[vcc](VCC){\vccPotential};
		\draw (G1-G) node[ground](GND){};

	\end{circuitikz}
	\caption{\textbf{OR} Gate}
\end{figure}

\subsection{XOR Gate}

\begin{figure}[!hp]
	\centering
	\begin{circuitikz}[american]

		\draw (0,0) \myXOR{G1}{A}
		{\gateTransistor}
		{\gateTransistor}
		{\gateTransistor}
		{\gateTransistor}
		{\gateTransistor}
		;

		\draw \labelXORresistor{G1}
		{\baseResistor}
		{\baseResistor}
		{\baseResistor}
		{\baseResistor}
		{\baseResistor}
		{\outResistor}
		;

		\draw (G1-A) node[ocirc] {};
		\draw (G1-A) node[left=4pt] {A};

		\draw (G1-B) node[ocirc] {};
		\draw (G1-B) node[left=4pt] {B};

		\draw (G1-O) node[ocirc] {};
		\draw (G1-O) node[right=4pt] {O};

		\draw (G1-V) node[vcc](VCC){\vccPotential};
		\draw (G1-G) node[ground](GND){};

	\end{circuitikz}
	\caption{\textbf{XOR} Gate}
\end{figure}

\clearpage

\section{Adders}

\subsection{Half Adder}

\begin{figure}[!ht]
	\centering
	\begin{circuitikz}[american]

		\draw (0,0)
		coordinate(A)
		node()[left=4pt]{$A$}
		to[short, o-] ++(1,0)
		coordinate(Bbr-above) to[short, -*] ++(0.75,0)
		coordinate(Abr)
		-- ++(0.5,0)
		node(G1)[xor port, anchor=in 1]{}
		(G1.south) node(G1-name)[below=8pt]{$XOR$}
		(G1.in 2) to[short, -*] (Bbr-above|-G1.in 2)
		coordinate(Bbr)
		to[short, -o] (A|-G1.in 2)
		node()[left=4pt]{$B$}
		(Abr) -- (Abr|-G1-name) -- ++(0,-1)
		coordinate(tmp)
		-- (tmp -| G1.in 2)
		node(G2)[and port, anchor=in 1]{}
		(G2.south) node(G2-name)[below=8pt]{$AND$}
		(G2.in 2) -| (Bbr)
		(G1.out) to[short, -o] ++(1,0)
		coordinate(tmp)
		node()[right=4pt]{$S$}
		(G2.out) to[short, -o] (G2.out-|tmp)
		node()[right=4pt]{$C_{out}$}
		;

	\end{circuitikz}
	\caption{Half Adder}
\end{figure}

\vspace{0.2\textheight}

\subsection{Full Adder}

\begin{figure}[!hb]
	\centering
	\begin{circuitikz}[american]

		\draw (0,0)
		coordinate(A)
		node()[left=4pt]{$A$}
		to[short, o-] ++(1,0)
		coordinate(Bbr-above) to[short, -*] ++(0.75,0)
		coordinate(Abr)
		-- ++(0.5,0)
		node(XOR-G1)[xor port, anchor=in 1]{}
		(XOR-G1.south) node(XOR-G1-name)[below=8pt]{$XOR$}
		(XOR-G1.in 2) to[short, -*] (Bbr-above|-XOR-G1.in 2)
		coordinate(Bbr)
		to[short, -o] (A|-XOR-G1.in 2)
		coordinate(B)
		node()[left=4pt]{$B$}
		(Abr) -- (Abr|-XOR-G1-name) -- ++(0,-1)
		coordinate(tmp)
		-- (tmp -| XOR-G1.in 2)
		node(AND-G1)[and port, anchor=in 1]{}
		(AND-G1.south) node(AND-G1-name)[below=8pt]{$AND$}
		(AND-G1.in 2) -| (Bbr)
		(XOR-G1.out) to[short, -*] ++(0.5,0)
		coordinate(XOR-G1-Obr)
		-- ++(0.75,0)
		coordinate(Sbr-below)
		-- ++(0.5,0)
		node(AND-G2)[and port, anchor=in 2]{}
		(AND-G2.south) node(AND-G2-name)[below=8pt]{$AND$}
		(AND-G2.in 1-|AND-G2.north) ++(0,1)
		node(XOR-G2-name)[]{$XOR$}
		(XOR-G2-name.north) ++(0,8pt)
		node(XOR-G2)[xor port, anchor=south]{}
		(XOR-G2.in 2) -| (XOR-G1-Obr)
		(XOR-G2.in 1) to[short, -*] (Sbr-below|-XOR-G2.in 1)
		-- (Sbr-below|-AND-G2.in 1)
		-- (AND-G2.in 1)
		(Sbr-below|-XOR-G2.in 1) to[short, -o]
		(A|-XOR-G2.in 1)
		coordinate(Cin)
		node[left=4pt]{$C_{in}$}
		(AND-G1.out) -- (AND-G1.out-|AND-G2.out)
		-- ++(1.5,0)
		node(OR-G1)[or port, anchor=in 2]{}
		(OR-G1.south) node(OR-G1-name)[below=8pt]{$OR$}
		(OR-G1.in 1) -- ++(-0.5,0) |- (AND-G2.out)
		(OR-G1.out) to[short, -o] ++(0.5,0)
		coordinate(Cout)
		node[right=4pt]{$C_{out}$}
		(XOR-G2.out) to[short, -o] (XOR-G2.out-|Cout)
		node[right=4pt]{S}
		coordinate(S)
		;

	\end{circuitikz}
	\caption{Full Adder}
\end{figure}

\clearpage

\subsection{Full Adder from Raw \textbf{Transistors}}

\begin{figure}[!h]
	\centering
	\resizebox{\textwidth}{!}{
	\begin{circuitikz}[american, rotate=-90, scale=0.8, transform shape]

		\draw (0,0)

		coordinate(A)
		node()[left=4pt]{$A$}
		(A) to[short, o-] ++(1.5,0)
		coordinate(Bbr-above)
		to[short, -*] ++(1.5,0)
		coordinate(Abr)
		-- ++(5,0)

		\myXOR{XOR-G1}{A}
		{$\gateTransistor$}
		{$\gateTransistor$}
		{$\gateTransistor$}
		{$\gateTransistor$}
		{$\gateTransistor$}

		\labelXORresistor{XOR-G1}
		{\baseResistor}
		{\baseResistor}
		{\baseResistor}
		{\baseResistor}
		{\baseResistor}
		{\outResistor}

		(Abr) -- (Abr|-XOR-G1-G) -- ++(0,-1)
		\myAND{AND-G1}{A}
		{\baseResistor}
		{\baseResistor}
		{\outResistor} % Apparently thats the one going to output
		{\baseResistor}
		{$\gateTransistor$}
		{$\gateTransistor$}
		{$\gateTransistor$}

		(XOR-G1-B) to[short, -*] (XOR-G1-B-|Bbr-above)
		coordinate(Bbr)
		to[short, *-o] (Bbr-|A)
		coordinate(B)
		node()[left=4pt]{$B$}

		(Bbr) |- (AND-G1-B)

		(XOR-G1-O) to[short, -*] ++(0.5,0)
		coordinate(XOR-G1-Obr)
		-- ++(1.5,0)
		coordinate(Sbr-below)

		\myAND{AND-G2}{B}
		{\baseResistor}
		{\baseResistor}
		{\outResistor} % Apparently thats the one going to output
		{\baseResistor}
		{$\gateTransistor$}
		{$\gateTransistor$}
		{$\gateTransistor$}

		(XOR-G1-Obr) -- ++($(Bbr)-(AND-G1-B-|Bbr)$)
		-- ++($(XOR-G1-B)-(Bbr)$)

		\myXOR{XOR-G2}{B}
		{$\gateTransistor$}
		{$\gateTransistor$}
		{$\gateTransistor$}
		{$\gateTransistor$}
		{$\gateTransistor$}

		\labelXORresistor{XOR-G2}
		{\baseResistor}
		{\baseResistor}
		{\baseResistor}
		{\baseResistor}
		{\baseResistor}
		{\outResistor}

		(XOR-G2-A) to[short, -*] (XOR-G2-A-|Sbr-below)
		-- (Sbr-below|-AND-G2-A)
		-- (AND-G2-A)
		(XOR-G2-A-|Sbr-below) to[short, -o]
		(XOR-G2-A-|A)
		coordinate(Cin)
		node()[left=4pt]{$C_{in}$}

		(AND-G1-O) -- (AND-G1-O-|XOR-G2-G)
		-- ++(0.5,0)

		\myOR{OR-G1}{B}
		{\baseResistor}
		{\baseResistor}
		{\baseResistor}
		{\outResistor}
		{$\gateTransistor$}
		{$\gateTransistor$}
		{$\gateTransistor$}

		(AND-G2-O) -- (AND-G2-O|-OR-G1-A)
		-- (OR-G1-A)

		(OR-G1-O)
		node [ocirc] {}
		coordinate(Cout)
		node()[right=4pt]{$C_{out}$}

		(XOR-G2-O) to[short,-o] (XOR-G2-O-|Cout)
		coordinate(S)
		node()[right=4pt]{$S$}

		(AND-G1-G) -- ++(0,-1)
		coordinate(AND-G1-Gbr)
		to[short, -*] (AND-G1-Gbr-|XOR-G1-G)
		-- (XOR-G1-G)
		(AND-G1-Gbr-|XOR-G1-G)
		to[short, -*] (AND-G1-Gbr-|AND-G2-G)
		-- (AND-G2-G)
		(AND-G1-Gbr-|AND-G2-G)
		to[short, -*] (AND-G1-Gbr-|XOR-G2-G)
		-- (XOR-G2-G)
		(AND-G1-Gbr-|XOR-G2-G)
		to[short, -*] (AND-G1-Gbr-|OR-G1-G)
		-- (OR-G1-G)
		(AND-G1-Gbr-|OR-G1-G)
		-- ++(0,-1)
		coordinate(G)
		node[ground]{}

		(XOR-G2-V)
		to[short, *-*] (XOR-G2-V-|AND-G2-V)
		-- (AND-G2-V)
		(XOR-G2-V-|AND-G2-V)
		to[short, -*] (XOR-G2-V-|XOR-G1-V)
		-- (XOR-G1-V)
		(XOR-G2-V-|XOR-G1-V)
		to[short,-*] (XOR-G2-V-|AND-G1-V)
		-- (AND-G1-V)
		(XOR-G2-V)
		-- (XOR-G2-V-|OR-G1-V)
		-- (OR-G1-V)
		(XOR-G2-V-|AND-G1-V)
		-- ++(0,1)
		coordinate(V)
		node[vcc]{\vccPotential}

		;

		\draw [blockdef-below] (AND-G1-A|-G)
		++(0,-1.5) coordinate (tmp)
		-- node [midway, fill=white] {AND Gate 1} (tmp-|AND-G1-O)
		;

		\draw [blockdef-above] (XOR-G1-A|-V)
		++(0,1.5) coordinate (tmp)
		-- node [midway, fill=white] {XOR Gate 1} (tmp-|XOR-G1-O)
		;

		\draw [blockdef-below] (AND-G2-A|-G)
		++(0,-1.5) coordinate (tmp)
		-- node [midway, fill=white] {AND Gate 2} (tmp-|AND-G2-O)
		;

		\draw [blockdef-above] (XOR-G2-A|-V)
		++(0,1.5) coordinate (tmp)
		-- node [midway, fill=white] {XOR Gate 2} (tmp-|XOR-G2-O)
		;

		\draw [blockdef-below] (OR-G1-A|-G)
		++(0,-1.5) coordinate (tmp)
		-- node [midway, fill=white] {OR Gate 1} (tmp-|OR-G1-O)
		;

	\end{circuitikz}
	}
	\caption{Full Adder from Raw \textbf{Transistors}}
\end{figure}

\clearpage

\section{Control Module}

\subsection{Control Module for 4 bit Ripple Adder}

\begin{figure}[!h]
	\centering
	\resizebox{!}{0.8\textheight}{
		\begin{circuitikz}[american, rotate=-90, transform shape]

			\draw

			% SA4

			(0,0)
			node (SA4) [spdt, anchor=in] {}

			(SA4.in) to[short, -*] ++(-0.5,0)
			coordinate (SA4-br)
			to[R, l=\ledResistor] ++(0,-2)
			to[leDo] ++(0,-2)
			coordinate (SA4-lend)

			(SA4.out 1) -- ++(0.5,0)
			coordinate (SA4-outbr)

			% SA3

			(SA4.in-|SA4.out 1) ++(5,1)
			node (SA3) [spdt, anchor=in] {}

			(SA3.in) to[short, -*] ++(-0.5,0)
			coordinate (SA3-br)
			to[R, l=\ledResistor] ++(0,-2)
			to[leDo] ++(0,-2)
			coordinate (SA3-lend)

			(SA3.out 1) -- ++(0.5,0)
			coordinate (SA3-outbr)

			% SA2

			(SA3.in-|SA3.out 1) ++(5,1)
			node (SA2) [spdt, anchor=in] {}

			(SA2.in) to[short, -*] ++(-0.5,0)
			coordinate (SA2-br)
			to[R, l=\ledResistor] ++(0,-2)
			to[leDo] ++(0,-2)
			coordinate (SA2-lend)

			(SA2.out 1) -- ++(0.5,0)
			coordinate (SA2-outbr)

			% SA1

			(SA2.in-|SA2.out 1) ++(5,1)
			node (SA1) [spdt, anchor=in] {}

			(SA1.in) to[short, -*] ++(-0.5,0)
			coordinate (SA1-br)
			to[R, l=\ledResistor] ++(0,-2)
			to[leDo] ++(0,-2)
			coordinate (SA1-lend)

			(SA1.out 1) -- ++(0.5,0)
			coordinate (SA1-outbr)

			% SB4

			(SA4.in-|SA4.out 1) ++(1.9,0) % my OCD :(
			coordinate (tmp)
			(tmp|-SA4-lend) ++(0,-4)

			node (SB4) [spdt, anchor=in] {}

			(SB4.in) to[short, -*] ++(-0.5,0)
			coordinate (SB4-br)
			to[R, l=\ledResistor] ++(0,-2)
			to[leDo] ++(0,-2)
			coordinate (SB4-lend)

			(SB4.out 1) -- ++(0.5,0)
			coordinate (SB4-outbr)

			% SB3

			(SB4.in-|SB4.out 1) ++(5,1)
			node (SB3) [spdt, anchor=in] {}

			(SB3.in) to[short, -*] ++(-0.5,0)
			coordinate (SB3-br)
			to[R, l=\ledResistor] ++(0,-2)
			to[leDo] ++(0,-2)
			coordinate (SB3-lend)

			(SB3.out 1) -- ++(0.5,0)
			coordinate (SB3-outbr)

			% SB2

			(SB3.in-|SB3.out 1) ++(5,1)
			node (SB2) [spdt, anchor=in] {}

			(SB2.in) to[short, -*] ++(-0.5,0)
			coordinate (SB2-br)
			to[R, l=\ledResistor] ++(0,-2)
			to[leDo] ++(0,-2)
			coordinate (SB2-lend)

			(SB2.out 1) -- ++(0.5,0)
			coordinate (SB2-outbr)

			% SB1

			(SB2.in-|SB2.out 1) ++(5,1)
			node (SB1) [spdt, anchor=in] {}

			(SB1.in) to[short, -*] ++(-0.5,0)
			coordinate (SB1-br)
			to[R, l=\ledResistor] ++(0,-2)
			to[leDo] ++(0,-2)
			coordinate (SB1-lend)

			(SB1.out 1) -- ++(0.5,0)
			coordinate (SB1-outbr)


			% A input

			(SA4-br)
			to[short, -o] ++(-3,0)
			coordinate (A4)
			node () [left=4pt] {$A_{4}$}

			(SA3-br)
			to[short, -o] (SA3-br-|A4)
			coordinate (A3)
			node () [left=4pt] {$A_{3}$}

			(SA2-br)
			to[short, -o] (SA2-br-|A4)
			coordinate (A2)
			node () [left=4pt] {$A_{2}$}

			(SA1-br)
			to[short, -o] (SA1-br-|A4)
			coordinate (A1)
			node () [left=4pt] {$A_{1}$}


			% B input

			(SB4-br)
			to[short, -o] (SB4-br-|A4)
			coordinate (B4)
			node () [left=4pt] {$B_{4}$}

			(SB3-br)
			to[short, -o] (SB3-br-|A4)
			coordinate (B3)
			node () [left=4pt] {$B_{3}$}

			(SB2-br)
			to[short, -o] (SB2-br-|A4)
			coordinate (B2)
			node () [left=4pt] {$B_{2}$}

			(SB1-br)
			to[short, -o] (SB1-br-|A4)
			coordinate (B1)
			node () [left=4pt] {$B_{1}$}


			% Output

			(SB1-outbr|-SB4-lend) ++(3,2)
			node (nb5) [npn, xscale=-1, anchor=E] {
				\scalebox{-1}[1]{\gateTransistor}}
			(nb5.C)
			to[leDo, mirror, invert] ++(0,2)
			to[R, l=\ledResistor] ++(0,2)
			coordinate (nb5-lend)
			(nb5.B)
			to[R, l_=\baseResistor] ++(2,0)
			coordinate (nb5-bend)

			(nb5.E) ++(3,1)
			node (nb4) [npn, xscale=-1, anchor=E] {
				\scalebox{-1}[1]{\gateTransistor}}
			(nb4.C)
			to[leDo, mirror, invert] ++(0,2)
			to[R, l=\ledResistor] ++(0,2)
			coordinate (nb4-lend)
			(nb4.B)
			to[R, l_=\baseResistor] ++(2,0)
			coordinate (nb4-bend)

			(nb4.E) ++(3,1)
			node (nb3) [npn, xscale=-1, anchor=E] {
				\scalebox{-1}[1]{\gateTransistor}}
			(nb3.C)
			to[leDo, mirror, invert] ++(0,2)
			to[R, l=\ledResistor] ++(0,2)
			coordinate (nb3-lend)
			(nb3.B)
			to[R, l_=\baseResistor] ++(2,0)
			coordinate (nb3-bend)

			(nb3.E) ++(3,1)
			node (nb2) [npn, xscale=-1, anchor=E] {
				\scalebox{-1}[1]{\gateTransistor}}
			(nb2.C)
			to[leDo, mirror, invert] ++(0,2)
			to[R, l=\ledResistor] ++(0,2)
			coordinate (nb2-lend)
			(nb2.B)
			to[R, l_=\baseResistor] ++(2,0)
			coordinate (nb2-bend)

			(nb2.E) ++(3,1)
			node (nb1) [npn, xscale=-1, anchor=E] {
				\scalebox{-1}[1]{\gateTransistor}}
			(nb1.C)
			to[leDo, mirror, invert] ++(0,2)
			to[R, l=\ledResistor] ++(0,2)
			coordinate (nb1-lend)
			(nb1.B)
			to[R, l_=\baseResistor] ++(2,0)
			coordinate (nb1-bend)

			% O output

			(nb1-bend)
			to[short, -o] ++(2,0)
			coordinate (O1)
			node () [right=4pt] {$O_{1}$}

			(nb2-bend)
			to[short, -o] (nb2-bend-|O1)
			coordinate (O2)
			node () [right=4pt] {$O_{2}$}

			(nb3-bend)
			to[short, -o] (nb3-bend-|O1)
			coordinate (O3)
			node () [right=4pt] {$O_{3}$}

			(nb4-bend)
			to[short, -o] (nb4-bend-|O1)
			coordinate (O2)
			node () [right=4pt] {$O_{4}$}

			(nb5-bend)
			to[short, -o] (nb5-bend-|O1)
			coordinate (Cfinal)
			node () [right=4pt] {$C_{final}$}

			% Carry initial

			(SA4-lend|-SB4-lend)
			to[short, *-o] (A1|-SB4-lend)
			coordinate (Cinitial)
			node [left=4pt] {$C_{initial}$}

			% Supply out

			(SA1-outbr|-SA1.out 2) ++(0,-1)
			coordinate (tmp)
			to[short, *-o] (O1|-tmp)
			coordinate (Gout)
			node [right=4pt] {$G_{out}$}

			(Gout) ++(0,1)
			coordinate (Vout)
			to[short, o-*] (SB1-outbr|-Vout)
			(Vout)
			node [right=4pt] {$V_{out}$}

			% ground

			(SB4-lend) to[short, -*] ++(0,-1)
			coordinate (Gbr)

			(SB4.out 2) -- (SB4-outbr|-SB4.out 2)
			to[short, -*] (SB4-outbr|-Gbr)
			(SB3.out 2) -- (SB3-outbr|-SB3.out 2)
			to[short, -*] (SB3-outbr|-Gbr)
			(SB2.out 2) -- (SB2-outbr|-SB2.out 2)
			to[short, -*] (SB2-outbr|-Gbr)
			(SB1.out 2) -- (SB1-outbr|-SB1.out 2)
			to[short, -*] (SB1-outbr|-Gbr)

			(SA4.out 2) -- (SA4-outbr|-SA4.out 2)
			to[short, -*] (SA4-outbr|-Gbr)
			(SA3.out 2) -- (SA3-outbr|-SA3.out 2)
			to[short, -*] (SA3-outbr|-Gbr)
			(SA2.out 2) -- (SA2-outbr|-SA2.out 2)
			to[short, -*] (SA2-outbr|-Gbr)
			(SA1.out 2) -- (SA1-outbr|-SA1.out 2)
			to[short, -*] (SA1-outbr|-Gbr)

			(SA4-lend) to[short, -] (SA4-lend|-Gbr)
			(SA3-lend) to[short, -*] (SA3-lend|-Gbr)
			(SA2-lend) to[short, -*] (SA2-lend|-Gbr)
			(SA1-lend) to[short, -*] (SA1-lend|-Gbr)

			(SB3-lend) to[short, -*] (SB3-lend|-Gbr)
			(SB2-lend) to[short, -*] (SB2-lend|-Gbr)
			(SB1-lend) to[short, -*] (SB1-lend|-Gbr)

			(nb5.E) to[short, -*] (nb5.E|-Gbr)
			(nb4.E) to[short, -*] (nb4.E|-Gbr)
			(nb3.E) to[short, -*] (nb3.E|-Gbr)
			(nb2.E) to[short, -*] (nb2.E|-Gbr)
			(nb1.E) to[short, -] (nb1.E|-Gbr)

			(SA4-lend|-Gbr)
			to[short, -*] (nb1.E|-Gbr)
			-- ++(0,-1.5)
			coordinate (G)
			node [ground] {}

			% vcc

			(SA1-outbr) to[short, -*] ++(0,1.5)
			coordinate (Vbr)

			(SA4-outbr) to[short, -] (SA4-outbr|-Vbr)
			(SA3-outbr) to[short, -*] (SA3-outbr|-Vbr)
			(SA2-outbr) to[short, -*] (SA2-outbr|-Vbr)
			(SA1-outbr) to[short, -*] (SA1-outbr|-Vbr)

			(SB4-outbr) to[short, -*] (SB4-outbr|-Vbr)
			(SB3-outbr) to[short, -*] (SB3-outbr|-Vbr)
			(SB2-outbr) to[short, -*] (SB2-outbr|-Vbr)
			(SB1-outbr) to[short, -*] (SB1-outbr|-Vbr)


			(nb5-lend) to[short, -*] (nb5-lend|-Vbr)
			(nb4-lend) to[short, -*] (nb4-lend|-Vbr)
			(nb3-lend) to[short, -*] (nb3-lend|-Vbr)
			(nb2-lend) to[short, -*] (nb2-lend|-Vbr)
			(nb1-lend) to[short, -] (nb1-lend|-Vbr)

			(nb1-lend|-Vbr)
			to[short, -*] (SA4-outbr|-Vbr)
			-- ++(0,1.5)
			coordinate (V)
			node [vcc] {\vccPotential}

			;

		\end{circuitikz}
		}
		\caption{Control Module for \textbf{4 bit Ripple Adder}}
	\end{figure}


\clearpage

\subsection{Control Module for Full Adder}

\begin{figure}[!h]
	\centering
	\resizebox{\textwidth}{!}{
		\begin{circuitikz}[american]

		\draw (0,0)
		node (S1) [spdt] {}

		(S1.in) to[short, -*] ++(-0.5,0)
		coordinate (S1br)
		to[short, -o] ++(-2,0)
		coordinate (A)
		node [left=4pt] {$A$}

		(S1br) -- ++(0,-0.5)
		to[R, l=\ledResistor] ++(0,-2)
		to[leDo] ++(0,-2)
		-- ++(0,-0.5)
		coordinate (Gbr)

		(S1.out 2) -- ++(0.5,0)
		coordinate (S1outbr)
		to[short, -*] (S1outbr|-Gbr)

		(S1.out 1) -- (S1.out 1-|S1outbr)
		to[short, -*] ++($(S1.out 2)-(S1.out 2|-Gbr)$)
		coordinate (Vbr)

		(S1.out 1) ++(4.5,1)
		node (S2) [spdt, anchor=out 1] {}
		(S2.out 1) -- ++(0.5,0)
		coordinate (S2outbr)

		to[short, -*] (S2outbr|-Vbr)
		(S2.out 2) -- (S2outbr|-S2.out 2)
		to[short, -*] (S2outbr|-Gbr)

		(S2.in) to[short, -*] ++(-0.5,0)
		coordinate (S2br)
		to[short, -o] (S2br-|A)
		coordinate (B)
		node [left=4pt] {$B$}

		(S2br) to[R, l=\ledResistor] ++(0,-2)
		to[leDo] ++(0,-2)
		to[short, -*] (S2br|-Gbr)

		(S2.out 1) ++(4.5,1)
		node (S3) [spdt, anchor=out 1] {}
		(S3.out 1) -- ++(0.5,0)
		coordinate (S3outbr)

		to[short, -*] (S3outbr|-Vbr)
		(S3.out 2) -- (S3outbr|-S3.out 2)
		to[short, -*] (S3outbr|-Gbr)

		(S3.in) to[short, -*] ++(-0.5,0)
		coordinate (S3br)
		to[short, -o] (S3br-|A)
		coordinate (Cin)
		node [left=4pt] {$C_{in}$}

		(S3br) to[R, l=\ledResistor] ++(0,-2)
		to[leDo] ++(0,-2)
		to[short, -*] (S3br|-Gbr)

		(S1.in-|S3.in) ++(4,0)
		node (nb1) [npn, xscale=-1, anchor=C] {
			\scalebox{-1}[1]{\gateTransistor}}

		(nb1.C) -- ++(0,-0.5)
		to[leDo, invert, mirror] ++(0,2)
		to[R, l=\ledResistor] ++(0,2)
		to[short, -*] (nb1.C|-Vbr)

		(nb1.E) to[short, -*] (nb1.E|-Gbr)

		(nb1.B) -- ++(2.25,0)
		to[R, l=\baseResistor] ++(2,0)
		to[short, -o] ++(0.5,0)
		coordinate (S)
		node [right=4pt] {$S$}

		(nb1.C) ++(2.25,1)
		node (nb2) [npn, xscale=-1, anchor=C] {
			\scalebox{-1}[1]{\gateTransistor}}

		(nb2.C) -- ++(0,-0.5)
		to[leDo, invert, mirror] ++(0,2)
		to[R, l=\ledResistor] ++(0,2)
		-- (nb2.C|-Vbr)

		(nb2.E) to[short, -*] (nb2.E|-Gbr)

		(nb2.B) to[R, l=\baseResistor] ++(2,0)
		to[short, -o] (nb2.B-|S)
		coordinate (Cout)
		node [right=4pt] {$C_{out}$}

		(Cin) ++($(Cin)-(B)$)
		coordinate (Vout)
		node [left=4pt] {$V_{out}$}
		to[short, o-*] (Vout-|S3outbr)

		(S) ++($(S)-(Cout)$)
		coordinate (Gout)
		node [right=4pt] {$G_{out}$}
		to[short, o-*] (Gout-|S3outbr)

		(nb2.C|-Vbr) -- (S1outbr|-Vbr)
		-- ++(0,1.5)
		coordinate (V)
		node [vcc] {\vccPotential}

		(S1br|-Gbr) -- (nb2.E|-Gbr)
		-- ++(0,-1.5)
		coordinate (G)
		node [ground] {}

		;

	\end{circuitikz}
	}
	\caption{Control Module for \textbf{Full Adder}}
\end{figure}

\end{document}
